<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cqcloud.platform.mapper.SysFileMapper">
    <resultMap id="baseResultMap" type="com.cqcloud.platform.entity.SysFile">
        <result property="id" column="id"/>
        <result property="name" column="name"/>
        <result property="original" column="original"/>
        <result property="groupId" column="group_id"/>
        <result property="fileType" column="file_type"/>
        <result property="suffix" column="suffix"/>
        <result property="size" column="size"/>
        <result property="previewUrl" column="preview_url"/>
        <result property="storageType" column="storage_type"/>
        <result property="storageUrl" column="storage_url"/>
        <result property="bucketName" column="bucket_name"/>
        <result property="objectName" column="object_name"/>
        <result property="visitCount" column="visit_count"/>
        <result property="sort" column="sort"/>
        <result property="remarks" column="remarks"/>
        <result property="tenantId" column="tenant_id"/>
        <result property="delFlag" column="del_flag"/>
        <result property="createBy" column="create_by"/>
        <result property="updateBy" column="update_by"/>
        <result property="gmtCreate" column="gmt_create"/>
        <result property="gmtModified" column="gmt_modified"/>
    </resultMap>

    <select id="getSysFileVoPage" resultType="com.cqcloud.platform.vo.SysFileVo">
        select * from public.sys_file t
        where t.del_flag = '0'
        <if test="query.name != null and query.name != ''">
            <bind name="nameLike" value="'%'+query.name+'%'"/>
            and t.name like #{nameLike}
        </if>
        order by t.gmt_create desc
    </select>
</mapper>
